- defaults:
    link:
      create: true
      relink: true
- link:
    ~/.config/fish: fish
    ~/.config/nvim: nvim
    ~/.config/omf: omf
    ~/.config/karabiner: karabiner
    ~/.hammerspoon: hammerspoon
    ~/.Brewfile: brew/Brewfile
    ~/.asdfrc: asdf/.asdfrc
    ~/.tool-versions: asdf/.tool-versions

- shell:
    - description: "Installing asdf plugins"
      command: |
        if command -v asdf >/dev/null 2>&1 && [ -f "asdf/plugins.txt" ]; then
          echo "🔌 Installing asdf plugins..."
          while IFS= read -r plugin || [ -n "$plugin" ]; do
            if [[ -z "$plugin" || "$plugin" =~ ^[[:space:]]*# ]]; then
              continue
            fi
            echo "📦 Installing plugin: $plugin"
            if asdf plugin list | grep -q "^$plugin$"; then
              echo "⚠️  Plugin $plugin is already installed, skipping"
            else
              asdf plugin add "$plugin" || echo "❌ Failed to install plugin: $plugin"
            fi
          done < "asdf/plugins.txt"
          echo "🔧 Installing tool versions..."
          asdf install || echo "⚠️  Some tools may have failed to install"
          echo "✅ asdf setup complete!"
        else
          if ! command -v asdf >/dev/null 2>&1; then
            echo "ℹ️  asdf not found - skipping plugin installation"
            echo "💡 Install asdf first: https://asdf-vm.com/guide/getting-started.html"
          fi
        fi
      quiet: false
